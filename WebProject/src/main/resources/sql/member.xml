<?xml version="1.0" encoding="UTF-8" ?>
 <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="memberns">
	<!-- email 중복검사 -->
	<select id="isdup_email" parameterType="String"
		resultType="member">
		select * from member where Lower(email)= #{value}
	</select>
	<!-- nickname 중복검사 -->
	<select id="isdup_nickname" parameterType="String"
		resultType="member">
		select * from member where Lower(nickname)= #{value}
	</select>
	<!-- reg_key 중복검사 -->
	<select id="isdup_reg_key" parameterType="String"
		resultType="member">
		select * from member where Lower(reg_key)= #{value}
	</select>
	<!-- 회원선택 -->
	<select id="select_member" parameterType="String"
		resultType="member">
		select * from member where Lower(email)= #{email}
	</select>
	<!-- 회원저장 -->
	<insert id="member_join" parameterType="member">
		insert INTO member
		values(
		#{email},#{univ_name},#{nickname},#{password},'n','unknown',
		0,null,#{reg_key},sysdate,'컴퓨터공학과','unknown.jpg','안넝하세여')
	</insert>
	<!-- 회원인증 -->
	<update id="member_to_member" parameterType="String">
		update member set grade = 'member' where reg_key =#{reg_key};
	</update>


	<!-- 회원 목록 -->
	<select id="memberList" resultType="thelecture.model.MemberBean">
		select
		email as email,
		nickname as nickname,
		univ_name as univ_name
		from member
		order by email

	</select>


	<!-- 회원정보수정 -->
	<!-- <update id="member_update"> update member set NICKNAME = #{nickname} 
		where EMAIL = #{email} </update> -->

	<!-- 회원정보 상세조회 -->
	<select id="viewMember" parameterType="String"
		resultType="thelecture.model.MemberBean">
		select
		email,
		nickname,
		univ_name,
		major,
		profile
		from member
		where nickname = #{nickname}

	</select>



</mapper>
